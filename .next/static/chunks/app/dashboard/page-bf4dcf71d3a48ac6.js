(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{77653:function(e,s,r){Promise.resolve().then(r.bind(r,71720))},71720:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return g}});var t=r(57437),a=r(2265),l=r(59883),n=r(66070),c=r(44794),i=r(95805),o=r(20395),d=r(41473),u=r(48713),m=r(86595),x=r(29857),f=r(49322),h=r(65613);function g(){let[e,s]=(0,a.useState)({cpu_percent:0,memory:{total_gb:0,used_gb:0,available_gb:0,percent:0},disk:{total_gb:0,used_gb:0,free_gb:0,percent:0}}),[r,g]=(0,a.useState)({items:0,users:0,weapons:0,categories:0,collections:0,rarities:0,types:0}),[p,b]=(0,a.useState)(!0),[y,j]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{b(!0),j(null);try{let e={cpu_percent:25.5,memory:{total_gb:16,used_gb:8.2,available_gb:7.8,percent:51.25},disk:{total_gb:512,used_gb:256,free_gb:256,percent:50}};try{await v().catch(r=>{console.warn("Server stats unavailable, using mock data:",r),s(e)})}catch(r){console.warn("Server stats unavailable, using mock data:",r),s(e)}try{await N().catch(e=>{console.warn("Entity counts unavailable, using mock data:",e),g({items:42,users:15,weapons:24,categories:8,collections:12,rarities:6,types:5})})}catch(e){console.warn("Entity counts unavailable, using mock data:",e),g({items:42,users:15,weapons:24,categories:8,collections:12,rarities:6,types:5})}}catch(e){console.error("Error in fetchData:",e),j("Произошла ошибка при загрузке данных. Используются демо-данные.")}finally{b(!1)}})()},[]);let v=async()=>{try{let e=await fetch("/api/server-stats");if(!e.ok)throw Error("Ошибка при получении статистики сервера: ".concat(e.status));let r=await e.json();if(r.error)throw Error(r.error);s(r)}catch(e){console.error("Error fetching server stats:",e),j(e instanceof Error?e.message:"Не удалось загрузить данные сервера")}},N=async()=>{try{let e=async e=>{try{let s=await fetch(e);if(!s.ok)return console.warn("Warning: ".concat(e," returned status ").concat(s.status)),[];let r=await s.text();try{return JSON.parse(r)}catch(s){return console.error("Error parsing JSON from ".concat(e,":"),s,"Response:",r),[]}}catch(s){return console.error("Error fetching from ".concat(e,":"),s),[]}},[s,r,t,a,l,n]=await Promise.all([e("/api/items"),e("/api/weapons"),e("/api/categories"),e("/api/collections"),e("/api/rarities"),e("/api/types")]);g({items:Array.isArray(s)?s.length:0,users:0,weapons:Array.isArray(r)?r.length:0,categories:Array.isArray(t)?t.length:0,collections:Array.isArray(a)?a.length:0,rarities:Array.isArray(l)?l.length:0,types:Array.isArray(n)?n.length:0})}catch(e){console.error("Error fetching entity counts:",e),j(e instanceof Error?e.message:"Не удалось загрузить данные элементов"),g({items:0,users:0,weapons:0,categories:0,collections:0,rarities:0,types:0})}},w=[{label:"Total Items",value:r.items,icon:c.Z,color:"bg-blue-500"},{label:"Total Users",value:r.users,icon:i.Z,color:"bg-green-500"},{label:"Weapons",value:r.weapons,icon:o.Z,color:"bg-amber-500"},{label:"Categories",value:r.categories,icon:d.Z,color:"bg-purple-500"},{label:"Collections",value:r.collections,icon:u.Z,color:"bg-pink-500"},{label:"Rarities",value:r.rarities,icon:m.Z,color:"bg-yellow-500"},{label:"Types",value:r.types,icon:x.Z,color:"bg-cyan-500"}];return(0,t.jsxs)(l.default,{children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-zinc-400",children:"Welcome to your admin dashboard"})]}),p&&(0,t.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-zinc-400"})}),y&&(0,t.jsxs)(h.bZ,{variant:"destructive",className:"bg-red-900/20 border-red-800 text-red-300 mb-6",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4"}),(0,t.jsx)(h.X,{children:y})]}),!p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:w.map(e=>(0,t.jsx)(n.Zb,{className:"bg-zinc-900 border-zinc-800",children:(0,t.jsx)(n.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg ".concat(e.color),children:(0,t.jsx)(e.icon,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-zinc-400",children:e.label}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:e.value})]})]})})},e.label))}),(0,t.jsxs)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(n.Zb,{className:"bg-zinc-900 border-zinc-800",children:(0,t.jsxs)(n.aY,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Recent Activity"}),(0,t.jsx)("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center",children:(0,t.jsx)(i.Z,{className:"h-5 w-5 text-zinc-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"User added a new item"}),(0,t.jsxs)("p",{className:"text-sm text-zinc-400",children:[e," hour",1!==e?"s":""," ago"]})]})]},e))})]})}),(0,t.jsx)(n.Zb,{className:"bg-zinc-900 border-zinc-800",children:(0,t.jsxs)(n.aY,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"System Status"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"CPU Usage"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.cpu_percent.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-zinc-800 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(Math.min(e.cpu_percent,100),"%")}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"Memory Usage"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.memory.percent.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-zinc-800 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-amber-500 h-2 rounded-full",style:{width:"".concat(Math.min(e.memory.percent,100),"%")}})}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-zinc-500",children:[(0,t.jsxs)("span",{children:["Used: ",e.memory.used_gb.toFixed(2)," GB"]}),(0,t.jsxs)("span",{children:["Total: ",e.memory.total_gb.toFixed(2)," GB"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-zinc-400",children:"Disk Usage"}),(0,t.jsxs)("span",{className:"font-medium",children:[e.disk.percent.toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-zinc-800 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(Math.min(e.disk.percent,100),"%")}})}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-zinc-500",children:[(0,t.jsxs)("span",{children:["Used: ",e.disk.used_gb.toFixed(2)," GB"]}),(0,t.jsxs)("span",{children:["Free: ",e.disk.free_gb.toFixed(2)," GB"]}),(0,t.jsxs)("span",{children:["Total: ",e.disk.total_gb.toFixed(2)," GB"]})]})]})]})]})})]})]})]})}},65613:function(e,s,r){"use strict";r.d(s,{Cd:function(){return o},X:function(){return d},bZ:function(){return i}});var t=r(57437),a=r(2265),l=r(90535),n=r(94508);let c=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=a.forwardRef((e,s)=>{let{className:r,variant:a,...l}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,n.cn)(c({variant:a}),r),...l})});i.displayName="Alert";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("h5",{ref:s,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});o.displayName="AlertTitle";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...a})});d.displayName="AlertDescription"},66070:function(e,s,r){"use strict";r.d(s,{Ol:function(){return c},SZ:function(){return o},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return i}});var t=r(57437),a=r(2265),l=r(94508);let n=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});c.displayName="CardHeader";let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},49322:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},function(e){e.O(0,[441,681,582,883,971,117,744],function(){return e(e.s=77653)}),_N_E=e.O()}]);