(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{51284:function(e,t,a){Promise.resolve().then(a.bind(a,63712))},63712:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var s=a(57437),r=a(2265),i=a(99376),n=a(49232),l=a(70525),o=a(3085),c=a(82431),d=a(32660),m=a(76865),h=a(33245),u=a(40875),x=a(43391),p=a(45802),f=a(69076),g=a(92735),v=a(68919),j=a(34415),b=a(45884),N=a(31047),z=a(9089),y=a(62869),k=a(59883),w=a(77992),S=a(47625),M=a(21156),D=a(56940),T=a(97059),_=a(62994),C=a(8147),A=a(22190),E=a(84962),P=a(54061),F=a(82553),Z=a(5481),L=a(23263),I=a(8530),O=a(84190),R=a(26110);function U(e){var t,a,U,W,G,B,K,V;let{params:Y}=e,{toast:q}=(0,w.pm)(),H=(0,i.useRouter)(),X=(0,i.useSearchParams)().get("name")||"Unknown Item";Y.id;let $=(0,r.useRef)(null),J=(0,r.useRef)(null),[Q,ee]=(0,r.useState)(!0),[et,ea]=(0,r.useState)(!1),[es,er]=(0,r.useState)(null),[ei,en]=(0,r.useState)([]),[el,eo]=(0,r.useState)([]),[ec,ed]=(0,r.useState)([]),[em,eh]=(0,r.useState)(null),[eu,ex]=(0,r.useState)("1M"),[ep,ef]=(0,r.useState)("area"),[eg,ev]=(0,r.useState)(null),[ej,eb]=(0,r.useState)(null),[eN,ez]=(0,r.useState)(null),[ey,ek]=(0,r.useState)(null),[ew,eS]=(0,r.useState)(1e6),[eM,eD]=(0,r.useState)(!1),[eT,e_]=(0,r.useState)(!1),[eC,eA]=(0,r.useState)(0),[eE,eP]=(0,r.useState)(!1),eF=(0,r.useCallback)(async function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{var t,a,s,r,i,n,l,o,c,d,m,h,u,x,p,f,g;let v;ee(!0),er(null),eP(!1),eA(0);let j=new AbortController,b=setTimeout(()=>j.abort(),15e3),N="".concat(I.CT,"/api/v1/prices?name=").concat(encodeURIComponent(X));console.log("Fetching from:",N);let z=await fetch(N,{signal:j.signal,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(clearTimeout(b),!z.ok){let e=await z.text().catch(()=>"Unknown error");throw console.error("API Error (".concat(z.status,"):"),e),Error("API Error: ".concat(z.status).concat(e?" - ".concat(e):""))}try{let e=await z.text();if(!e||""===e.trim())throw Error("Empty response received");v=JSON.parse(e)}catch(e){throw console.error("JSON Parse Error:",e),Error("Failed to parse API response")}if(!v||!v.data||!Array.isArray(v.data))throw console.error("Invalid data structure:",v),Error("Invalid data structure received from API");if(0===v.data.length){eP(!0);let t=eG(X);en(t.data),eL(t.data,eu),eh(t.stats),e&&q({title:"No price data available",description:"Using sample data for preview purposes",variant:"warning"}),ee(!1),ea(!1);return}let y={price:(null===(t=v.stats)||void 0===t?void 0:t.price)||0,per_day:{gold:(null===(s=v.stats)||void 0===s?void 0:null===(a=s.per_day)||void 0===a?void 0:a.gold)||0,percent:(null===(i=v.stats)||void 0===i?void 0:null===(r=i.per_day)||void 0===r?void 0:r.percent)||0},per_week:{gold:(null===(l=v.stats)||void 0===l?void 0:null===(n=l.per_week)||void 0===n?void 0:n.gold)||0,percent:(null===(c=v.stats)||void 0===c?void 0:null===(o=c.per_week)||void 0===o?void 0:o.percent)||0},per_month:{gold:(null===(m=v.stats)||void 0===m?void 0:null===(d=m.per_month)||void 0===d?void 0:d.gold)||0,percent:(null===(u=v.stats)||void 0===u?void 0:null===(h=u.per_month)||void 0===h?void 0:h.percent)||0},per_year:{gold:(null===(p=v.stats)||void 0===p?void 0:null===(x=p.per_year)||void 0===x?void 0:x.gold)||0,percent:(null===(g=v.stats)||void 0===g?void 0:null===(f=g.per_year)||void 0===f?void 0:f.percent)||0}},k=v.data.map(e=>{try{let t=new Date(e.Date);return{...e,formattedDate:t.toLocaleDateString(),formattedTime:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),formattedDateTime:"".concat(t.toLocaleDateString()," ").concat(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),timestamp:t.getTime()}}catch(t){return console.error("Invalid date format:",e.Date),{...e,formattedDate:"Invalid date",formattedTime:"",formattedDateTime:"Invalid date",timestamp:0}}}).filter(e=>!isNaN(e.purchase_price)).sort((e,t)=>{try{return(e.timestamp||0)-(t.timestamp||0)}catch(e){return 0}});if(0===k.length){eP(!0);let t=eG(X);en(t.data),eL(t.data,eu),eh(t.stats),e&&q({title:"No valid price data available",description:"Using sample data for preview purposes",variant:"warning"})}else en(k),eL(k,eu),eh(y),et&&e&&q({title:"Data refreshed",description:"The latest price data has been loaded"})}catch(s){console.error("Error fetching item statistics:",s);let t=s.message||"Failed to load item statistics";er(t),e&&q({title:"Error",description:t,variant:"destructive"});let a=eG(X);en(a.data),eL(a.data,eu),eh(a.stats)}finally{ee(!1),ea(!1)}},[X,eu,q]),eZ=(0,r.useCallback)(e=>{if(!e||0===e.length)return[];if(e.length<=ew)return e;let t=Math.ceil(e.length/ew),a=[];a.push(e[0]);for(let s=t;s<e.length-t;s+=t)a.push(e[s]);return a.push(e[e.length-1]),a},[ew]),eL=(0,r.useCallback)((e,t)=>{if(!e||0===e.length){eo([]),ed([]);return}let a=new Date,s=new Date;switch(t){case"1W":s.setDate(a.getDate()-7);break;case"1M":s.setMonth(a.getMonth()-1);break;case"3M":s.setMonth(a.getMonth()-3);break;case"6M":s.setMonth(a.getMonth()-6);break;case"1Y":s.setFullYear(a.getFullYear()-1);break;case"ALL":eo(e),ed(e);return}try{let t=e.filter(e=>{try{return(e.timestamp||new Date(e.Date).getTime())>=s.getTime()}catch(e){return!1}}),a=t.length>0?t:e;eo(a),ed(eZ(a))}catch(t){console.error("Error filtering data:",t),eo(e),ed(eZ(e))}},[eZ]);(0,r.useEffect)(()=>{eF(!1)},[]),(0,r.useEffect)(()=>{ei.length>0&&eL(ei,eu)},[eu,ei,eL]),(0,r.useEffect)(()=>()=>{eN&&clearTimeout(eN)},[eN]),(0,r.useEffect)(()=>{let e=()=>{eD(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]);let eI=()=>{ea(!0),eA(0),eF()},eO=e=>{ex(e),eb(null)},eR=e=>{ef(e)},eU=e=>{if(!e||!e.activeCoordinate){eN&&(clearTimeout(eN),ez(null));return}eN&&clearTimeout(eN),ez(setTimeout(()=>{e.activePayload&&e.activePayload.length>0&&ek({x:e.activeCoordinate.x,y:e.activeCoordinate.y,data:e.activePayload[0].payload})},500))},eW=()=>{eN&&(clearTimeout(eN),ez(null)),ek(null)},eG=e=>{var t,a,s,r;let i=new Date,n=[],l=200+e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%300;for(let e=365;e>=0;e--){let t=new Date(i);t.setDate(t.getDate()-e);let a=20*Math.sin(e/30),s=10*Math.sin(e)+5*Math.cos(2*e),r=e/365*50,o=t.getTime();n.push({purchase_price:Number.parseFloat((l+a+s+r).toFixed(2)),Date:t.toISOString().split("T")[0]+" "+String(Math.floor(24*Math.random())).padStart(2,"0")+":"+String(Math.floor(60*Math.random())).padStart(2,"0")+":"+String(Math.floor(60*Math.random())).padStart(2,"0"),formattedDate:t.toLocaleDateString(),formattedTime:"".concat(String(Math.floor(24*Math.random())).padStart(2,"0"),":").concat(String(Math.floor(60*Math.random())).padStart(2,"0")),formattedDateTime:"".concat(t.toLocaleDateString()," ").concat(String(Math.floor(24*Math.random())).padStart(2,"0"),":").concat(String(Math.floor(60*Math.random())).padStart(2,"0")),timestamp:o})}let o=n[n.length-1].purchase_price,c=(null===(t=n[n.length-2])||void 0===t?void 0:t.purchase_price)||o,d=(null===(a=n[n.length-7])||void 0===a?void 0:a.purchase_price)||o,m=(null===(s=n[n.length-30])||void 0===s?void 0:s.purchase_price)||o,h=(null===(r=n[0])||void 0===r?void 0:r.purchase_price)||o,u=o-c,x=o-d,p=o-m,f=o-h;return{data:n,stats:{price:o,per_day:{gold:Number(u.toFixed(2)),percent:Number((u/c*100).toFixed(2))},per_week:{gold:Number(x.toFixed(2)),percent:Number((x/d*100).toFixed(2))},per_month:{gold:Number(p.toFixed(2)),percent:Number((p/m*100).toFixed(2))},per_year:{gold:Number(f.toFixed(2)),percent:Number((f/h*100).toFixed(2))}}}},eB=e=>null==e?"0.00 G":"".concat(e.toFixed(2)," G"),eK=e=>null==e?"0.00%":"".concat(e>0?"+":"").concat(e.toFixed(2),"%"),eV=e=>{let{active:t,payload:a,label:r}=e;if(t&&a&&a.length){let e=a[0].payload,t=a[0].value;return eg!==t&&ev(t),(0,s.jsxs)("div",{className:"bg-zinc-800 border border-zinc-700 p-4 rounded-md shadow-lg",children:[(0,s.jsx)("p",{className:"text-zinc-300 mb-2 font-medium",children:e.formattedDateTime||r}),(0,s.jsxs)("div",{className:"flex items-center text-zinc-100 text-lg font-semibold",children:[(0,s.jsx)(n.Z,{size:18,className:"mr-1"}),eB(t)]}),em&&(0,s.jsx)("div",{className:"mt-2 pt-2 border-t border-zinc-700",children:(0,s.jsxs)("div",{className:"flex items-center text-sm ".concat(t>em.price?"text-green-500":t<em.price?"text-red-500":"text-zinc-400"),children:[(0,s.jsx)("span",{children:"vs Current: "}),(0,s.jsxs)("span",{className:"ml-1",children:[eB(t-em.price)," (",((t-em.price)/(em.price||1)*100).toFixed(2),"%)"]})]})})]})}return null},eY=e=>{let{title:t,value:a,change:r,changePercent:i}=e,n=null!=r?r:0,c=n>=0;return(0,s.jsxs)("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 transition-all hover:border-zinc-700",children:[(0,s.jsx)("h3",{className:"text-zinc-500 text-sm font-medium mb-2",children:t}),(0,s.jsx)("p",{className:"text-2xl font-bold mb-1",children:eB(null!=a?a:0)}),(0,s.jsxs)("div",{className:"flex items-center text-sm ".concat(c?"text-green-500":"text-red-500"),children:[c?(0,s.jsx)(l.Z,{size:16,className:"mr-1"}):(0,s.jsx)(o.Z,{size:16,className:"mr-1"}),(0,s.jsx)("span",{children:eB(Math.abs(n))}),(0,s.jsxs)("span",{className:"ml-1",children:["(",eK(null!=i?i:0),")"]})]})]})},{minPrice:eq,maxPrice:eH,avgPrice:eX}=(0,r.useMemo)(()=>el.length?{minPrice:.98*Math.min(...el.map(e=>e.purchase_price)),maxPrice:1.02*Math.max(...el.map(e=>e.purchase_price)),avgPrice:el.reduce((e,t)=>e+t.purchase_price,0)/el.length}:{minPrice:0,maxPrice:0,avgPrice:0},[el]),e$=(0,r.useMemo)(()=>{if(!ej||!el.length)return ec;let e=ej.x[0],t=ej.x[1];return t-e<ew?el.slice(e,t+1):eZ(el.slice(e,t+1))},[ej,el,ec,ew,eZ]);return(0,s.jsxs)(k.default,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:[X," Statistics"]}),(0,s.jsx)("p",{className:"text-zinc-400",children:"Price history and performance metrics"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(y.z,{variant:"outline",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",onClick:eI,disabled:et,children:[(0,s.jsx)(c.Z,{size:16,className:"mr-2 ".concat(et?"animate-spin":"")}),et?"Refreshing...":"Refresh Data"]}),(0,s.jsxs)(y.z,{variant:"outline",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",onClick:()=>H.back(),children:[(0,s.jsx)(d.Z,{size:16,className:"mr-2"}),"Back"]})]})]}),es&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-800 text-red-300 p-4 rounded-lg mb-6",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(m.Z,{className:"mr-2 mt-0.5 flex-shrink-0",size:18}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Error loading data:"}),(0,s.jsx)("p",{children:es}),(0,s.jsx)("p",{className:"mt-2 text-sm",children:"Using fallback data for preview purposes."})]})]})}),eE&&(0,s.jsx)("div",{className:"bg-amber-900/20 border border-amber-800 text-amber-300 p-4 rounded-lg mb-6",children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(h.Z,{className:"mr-2 mt-0.5 flex-shrink-0",size:18}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"No price data available"}),(0,s.jsx)("p",{children:"There is no price history data available for this item."}),(0,s.jsx)("p",{className:"mt-2 text-sm",children:"Showing sample data for preview purposes."})]})]})}),em&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,s.jsx)(eY,{title:"Current Price",value:em.price,change:null===(t=em.per_day)||void 0===t?void 0:t.gold,changePercent:null===(a=em.per_day)||void 0===a?void 0:a.percent}),(0,s.jsx)(eY,{title:"Weekly Change",value:em.price,change:null===(U=em.per_week)||void 0===U?void 0:U.gold,changePercent:null===(W=em.per_week)||void 0===W?void 0:W.percent}),(0,s.jsx)(eY,{title:"Monthly Change",value:em.price,change:null===(G=em.per_month)||void 0===G?void 0:G.gold,changePercent:null===(B=em.per_month)||void 0===B?void 0:B.percent}),(0,s.jsx)(eY,{title:"Yearly Change",value:em.price,change:null===(K=em.per_year)||void 0===K?void 0:K.gold,changePercent:null===(V=em.per_year)||void 0===V?void 0:V.percent})]}),(0,s.jsxs)("div",{ref:J,className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6 ".concat(eM?"fixed inset-0 z-50 overflow-auto":""),children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Price History"}),(0,s.jsx)(y.z,{variant:"ghost",size:"sm",className:"ml-2 text-zinc-400 hover:text-zinc-100",onClick:()=>e_(!0),children:(0,s.jsx)(h.Z,{size:16})})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("div",{className:"flex rounded-md overflow-hidden",children:["1W","1M","3M","6M","1Y","ALL"].map(e=>(0,s.jsx)("button",{onClick:()=>eO(e),className:"px-3 py-1.5 text-sm font-medium ".concat(eu===e?"bg-purple-600 text-white":"bg-zinc-800 text-zinc-300 hover:bg-zinc-700"),children:e},e))}),(0,s.jsxs)(O.h_,{children:[(0,s.jsx)(O.$F,{asChild:!0,children:(0,s.jsxs)(y.z,{variant:"outline",size:"sm",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",children:["line"===ep?"Line Chart":"area"===ep?"Area Chart":"Candlestick",(0,s.jsx)(u.Z,{size:14,className:"ml-1"})]})}),(0,s.jsxs)(O.AW,{className:"bg-zinc-900 border-zinc-800",children:[(0,s.jsx)(O.Xi,{onClick:()=>eR("line"),className:"text-zinc-300 hover:text-white focus:text-white",children:"Line Chart"}),(0,s.jsx)(O.Xi,{onClick:()=>eR("area"),className:"text-zinc-300 hover:text-white focus:text-white",children:"Area Chart"})]})]})]})]}),Q?(0,s.jsx)("div",{className:"flex justify-center items-center h-[300px] text-zinc-500",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(c.Z,{size:24,className:"animate-spin mb-2"}),(0,s.jsx)("p",{children:"Loading chart data..."})]})}):el.length>0?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-end mb-2 gap-2",children:[(0,s.jsxs)(y.z,{variant:"outline",size:"sm",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",onClick:()=>{if(el.length){if(ej){let e=ej.x[1]-ej.x[0],t=Math.floor((ej.x[0]+ej.x[1])/2),a=Math.floor(Math.max(10,Math.floor(.75*e))/2);eb({x:[Math.max(0,t-a),Math.min(el.length-1,t+a)],y:[0,0]})}else{let e=el.length;eb({x:[Math.floor(.25*e),Math.floor(.75*e)],y:[0,0]})}}},children:[(0,s.jsx)(x.Z,{size:16,className:"mr-1"}),"Zoom In"]}),(0,s.jsxs)(y.z,{variant:"outline",size:"sm",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",onClick:()=>{if(!el.length||!ej)return;let e=ej.x[1]-ej.x[0],t=Math.min(el.length,Math.floor(2*e)),a=Math.floor((ej.x[0]+ej.x[1])/2),s=Math.floor(t/2),r={x:[Math.max(0,a-s),Math.min(el.length-1,a+s)],y:[0,0]};r.x[0]<=5&&r.x[1]>=el.length-5?eb(null):eb(r)},disabled:!ej,children:[(0,s.jsx)(p.Z,{size:16,className:"mr-1"}),"Zoom Out"]}),(0,s.jsxs)(y.z,{variant:"outline",size:"sm",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",onClick:()=>{eb(null)},disabled:!ej,children:[(0,s.jsx)(f.Z,{size:16,className:"mr-1"}),"Reset"]}),(0,s.jsxs)(y.z,{variant:"outline",size:"sm",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",onClick:()=>{if(!el.length)return;let e=new Blob([["Date,Time,Price (G)",...el.map(e=>{let t=new Date(e.Date);return[t.toLocaleDateString(),t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e.purchase_price.toString()].join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download","".concat(X.replace(/\s+/g,"_"),"_price_history.csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},children:[(0,s.jsx)(g.Z,{size:16,className:"mr-1"}),"Export"]}),(0,s.jsxs)(y.z,{variant:"outline",size:"sm",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",onClick:()=>{navigator.share?navigator.share({title:"".concat(X," Price History"),text:"Check out the price history for ".concat(X),url:window.location.href}).catch(e=>{console.error("Error sharing:",e)}):navigator.clipboard.writeText(window.location.href).then(()=>{q({title:"Link copied",description:"The URL has been copied to your clipboard"})})},children:[(0,s.jsx)(v.Z,{size:16,className:"mr-1"}),"Share"]}),(0,s.jsxs)(y.z,{variant:"outline",size:"sm",className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",onClick:()=>{eM?document.exitFullscreen():J.current&&J.current.requestFullscreen()},children:[eM?(0,s.jsx)(j.Z,{size:16,className:"mr-1"}):(0,s.jsx)(b.Z,{size:16,className:"mr-1"}),eM?"Exit Fullscreen":"Fullscreen"]})]}),(0,s.jsxs)("div",{className:"relative h-[400px] w-full",children:[(0,s.jsx)(S.h,{width:"100%",height:"100%",children:"line"===ep?(0,s.jsxs)(M.w,{data:e$,margin:{top:5,right:30,left:20,bottom:25},onMouseMove:eU,onMouseLeave:eW,ref:$,children:[(0,s.jsx)(D.q,{strokeDasharray:"3 3",stroke:"#3f3f46"}),(0,s.jsx)(T.K,{dataKey:"formattedDate",stroke:"#71717a",tick:{fill:"#a1a1aa"},tickMargin:10,minTickGap:30}),(0,s.jsx)(_.B,{stroke:"#71717a",tick:{fill:"#a1a1aa"},tickFormatter:e=>"".concat(e," G"),domain:[eq,eH]}),(0,s.jsx)(C.u,{content:(0,s.jsx)(eV,{})}),(0,s.jsx)(A.D,{}),(0,s.jsx)(E.d,{y:eX,stroke:"#8884d8",strokeDasharray:"3 3",label:{value:"Avg: ".concat(eB(eX)),fill:"#8884d8",position:"insideBottomRight"}}),em&&(0,s.jsx)(E.d,{y:em.price,stroke:"#10b981",strokeDasharray:"3 3",label:{value:"Current: ".concat(eB(em.price)),fill:"#10b981",position:"insideTopRight"}}),(0,s.jsx)(P.x,{name:"Price",type:"monotone",dataKey:"purchase_price",stroke:"#8884d8",strokeWidth:2,dot:e$.length<50&&{r:3,strokeWidth:1},activeDot:{r:6,strokeWidth:2},animationDuration:500,isAnimationActive:!ej,connectNulls:!0}),(0,s.jsx)(F.B,{dataKey:"formattedDate",height:30,stroke:"#8884d8",fill:"#27272a",tickFormatter:()=>""})]}):(0,s.jsxs)(Z.T,{data:e$,margin:{top:5,right:30,left:20,bottom:25},onMouseMove:eU,onMouseLeave:eW,ref:$,children:[(0,s.jsx)(D.q,{strokeDasharray:"3 3",stroke:"#3f3f46"}),(0,s.jsx)(T.K,{dataKey:"formattedDate",stroke:"#71717a",tick:{fill:"#a1a1aa"},tickMargin:10,minTickGap:30}),(0,s.jsx)(_.B,{stroke:"#71717a",tick:{fill:"#a1a1aa"},tickFormatter:e=>"".concat(e," G"),domain:[eq,eH]}),(0,s.jsx)(C.u,{content:(0,s.jsx)(eV,{})}),(0,s.jsx)(A.D,{}),(0,s.jsx)(E.d,{y:eX,stroke:"#8884d8",strokeDasharray:"3 3",label:{value:"Avg: ".concat(eB(eX)),fill:"#8884d8",position:"insideBottomRight"}}),em&&(0,s.jsx)(E.d,{y:em.price,stroke:"#10b981",strokeDasharray:"3 3",label:{value:"Current: ".concat(eB(em.price)),fill:"#10b981",position:"insideTopRight"}}),(0,s.jsx)(L.u,{name:"Price",type:"monotone",dataKey:"purchase_price",stroke:"#8884d8",fill:"url(#colorGradient)",strokeWidth:2,dot:e$.length<50&&{r:3,strokeWidth:1},activeDot:{r:6,strokeWidth:2},animationDuration:500,isAnimationActive:!ej,connectNulls:!0}),(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,s.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:.1})]})}),(0,s.jsx)(F.B,{dataKey:"formattedDate",height:30,stroke:"#8884d8",fill:"#27272a",tickFormatter:()=>""})]})}),ey&&ey.data&&(0,s.jsxs)("div",{className:"absolute bg-zinc-800/90 border border-zinc-700 p-3 rounded-md shadow-lg z-10",style:{left:ey.x+10,top:ey.y-80,maxWidth:"200px"},children:[(0,s.jsx)("p",{className:"text-zinc-300 text-sm font-medium mb-1",children:ey.data.formattedDateTime||ey.data.formattedDate}),(0,s.jsx)("p",{className:"text-zinc-100 font-bold",children:eB(ey.data.purchase_price)})]})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-zinc-400 mb-2",children:[(0,s.jsx)(N.Z,{size:16,className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm",children:"Time Period"})]}),(0,s.jsxs)("p",{className:"text-lg font-medium",children:["ALL"===eu?"All Available Data":eu,ej?" (Zoomed)":""]}),(0,s.jsxs)("p",{className:"text-sm text-zinc-500 mt-1",children:[el.length," total points / ",e$.length," displayed"]})]}),(0,s.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-zinc-400 mb-2",children:[(0,s.jsx)(n.Z,{size:16,className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm",children:"Price Range"})]}),(0,s.jsxs)("p",{className:"text-lg font-medium",children:[eB(eq)," - ",eB(eH)]}),(0,s.jsxs)("p",{className:"text-sm text-zinc-500 mt-1",children:["Spread: ",eB(eH-eq)]})]}),(0,s.jsxs)("div",{className:"bg-zinc-800 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-zinc-400 mb-2",children:[(0,s.jsx)(z.Z,{size:16,className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm",children:"Volatility"})]}),(0,s.jsxs)("p",{className:"text-lg font-medium",children:[eX?((eH-eq)/eX*100).toFixed(2):"0.00","%"]}),(0,s.jsxs)("p",{className:"text-sm text-zinc-500 mt-1",children:["Avg. Price: ",eB(eX)]})]})]})]}):(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center h-[300px] text-zinc-500",children:[(0,s.jsx)("p",{className:"mb-4",children:"No price history available"}),(0,s.jsxs)(y.z,{variant:"outline",onClick:eI,children:[(0,s.jsx)(c.Z,{size:16,className:"mr-2"}),"Try Again"]})]})]})]}),(0,s.jsx)(R.Vq,{open:eT,onOpenChange:e_,children:(0,s.jsxs)(R.cZ,{className:"bg-zinc-900 border-zinc-800 text-zinc-100",children:[(0,s.jsxs)(R.fK,{children:[(0,s.jsx)(R.$N,{children:"About Price Statistics"}),(0,s.jsx)(R.Be,{className:"text-zinc-400",children:"How to use the price history chart"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-zinc-200 mb-1",children:"Time Periods"}),(0,s.jsx)("p",{className:"text-zinc-400 text-sm",children:"Select different time periods (1W, 1M, 3M, 6M, 1Y, ALL) to view price history over specific timeframes."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-zinc-200 mb-1",children:"Chart Types"}),(0,s.jsx)("p",{className:"text-zinc-400 text-sm",children:"Switch between Line and Area charts to visualize price trends in different ways."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-zinc-200 mb-1",children:"Zoom Controls"}),(0,s.jsx)("p",{className:"text-zinc-400 text-sm",children:"Use Zoom In, Zoom Out, and Reset buttons to focus on specific time periods. You can also use the brush control at the bottom of the chart to select a specific range."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-zinc-200 mb-1",children:"Data Export"}),(0,s.jsx)("p",{className:"text-zinc-400 text-sm",children:"Export the price history data as a CSV file for further analysis in spreadsheet software."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium text-zinc-200 mb-1",children:"Reference Lines"}),(0,s.jsx)("p",{className:"text-zinc-400 text-sm",children:"The chart displays reference lines for the average price and current price to help you compare values."})]})]})]})})]})}},26110:function(e,t,a){"use strict";a.d(t,{$N:function(){return x},Be:function(){return p},Vq:function(){return o},cN:function(){return u},cZ:function(){return m},fK:function(){return h}});var s=a(57437),r=a(2265),i=a(95885),n=a(32489),l=a(94508);let o=i.fC;i.xz;let c=i.h_;i.x8;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});d.displayName=i.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(d,{}),(0,s.jsxs)(i.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full","max-h-[calc(100vh-2rem)] overflow-y-auto",a),...o,children:[r,(0,s.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.VY.displayName;let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};u.displayName="DialogFooter";let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});x.displayName=i.Dx.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});p.displayName=i.dk.displayName},77992:function(e,t,a){"use strict";a.d(t,{Am:function(){return m},pm:function(){return h}});var s=a(2265);let r=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function m(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function h(){let[e,t]=s.useState(c);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[441,681,582,447,757,883,971,117,744],function(){return e(e.s=51284)}),_N_E=e.O()}]);