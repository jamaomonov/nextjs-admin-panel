(()=>{var e={};e.id=798,e.ids=[798],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14293:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>o}),a(29145),a(5964),a(35866);var t=a(23191),n=a(88716),r=a(37922),l=a.n(r),i=a(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(s,c);let o=["",{children:["collections",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,29145)),"/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/collections/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,45315)),"/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/collections/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,5964)),"/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/collections/page.tsx"],m="/collections/page",x={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/collections/page",pathname:"/collections",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},11009:(e,s,a)=>{Promise.resolve().then(a.bind(a,49100))},49100:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var t=a(10326),n=a(17577),r=a(78391),l=a(90772),i=a(54432),c=a(88307),o=a(83855),d=a(69508),m=a(98091),x=a(15940),h=a(62288),p=a(3892),u=a(5426),b=a(34789);let j=[{id:1,name:"Коллекция Феникс"},{id:2,name:"Коллекция Кобра"},{id:3,name:"Коллекция Охотник"},{id:4,name:"Коллекция Перчатки"},{id:5,name:"Коллекция Хрома"}];function f(){let{toast:e}=(0,b.pm)(),[s,a]=(0,n.useState)([]),[f,g]=(0,n.useState)(!0),[N,v]=(0,n.useState)(""),[z,y]=(0,n.useState)(!1),[w,C]=(0,n.useState)(!1),[S,P]=(0,n.useState)(!1),[k,_]=(0,n.useState)(!1),[E,$]=(0,n.useState)(null),q=async()=>{try{g(!0),y(!1);let e=await fetch("/api/collections",{cache:"no-store"});if(!e.ok)throw Error(`API Error: ${e.status}`);let s=await e.json();a(s)}catch(s){console.error("Error fetching collections:",s),a(j),y(!0),e({title:"Внимание",description:"Используются демо-данные для предпросмотра.",variant:"destructive"})}finally{g(!1)}},T=s.filter(e=>e.name.toLowerCase().includes(N.toLowerCase()));return(0,t.jsxs)(r.default,{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Collections"}),t.jsx("p",{className:"text-zinc-400",children:"Manage item collections"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[t.jsx(c.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-zinc-500"}),t.jsx(i.I,{type:"search",placeholder:"Search collections...",className:"pl-8 bg-zinc-900 border-zinc-800 focus-visible:ring-zinc-700",value:N,onChange:e=>v(e.target.value)})]}),(0,t.jsxs)(l.z,{className:"bg-zinc-800 hover:bg-zinc-700",onClick:()=>C(!0),children:[t.jsx(o.Z,{size:18,className:"mr-2"}),"Add Collection"]})]})]}),f&&t.jsx("div",{className:"flex justify-center items-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-zinc-400"})}),z&&!f&&(0,t.jsxs)("div",{className:"bg-amber-900/20 border border-amber-800 text-amber-300 p-4 rounded-lg mb-6",children:[t.jsx("p",{children:"Используются демо-данные для предпросмотра."}),t.jsx("p",{className:"mt-2 text-sm",children:"В рабочей версии приложения данные будут загружаться с вашего API."})]}),!f&&(0,t.jsxs)(t.Fragment,{children:[N&&(0,t.jsxs)("p",{className:"mb-4 text-zinc-400",children:["Найдено результатов: ",T.length]}),t.jsx("div",{className:"rounded-md border border-zinc-800 overflow-hidden",children:(0,t.jsxs)(x.iA,{children:[t.jsx(x.xD,{className:"bg-zinc-900",children:(0,t.jsxs)(x.SC,{className:"hover:bg-zinc-900/80 border-zinc-800",children:[t.jsx(x.ss,{className:"text-zinc-400",children:"ID"}),t.jsx(x.ss,{className:"text-zinc-400",children:"Name"}),t.jsx(x.ss,{className:"text-zinc-400 text-right",children:"Actions"})]})}),t.jsx(x.RM,{children:T.length>0?T.map(e=>(0,t.jsxs)(x.SC,{className:"hover:bg-zinc-900/50 border-zinc-800",children:[t.jsx(x.pj,{children:e.id}),t.jsx(x.pj,{className:"font-medium",children:e.name}),t.jsx(x.pj,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(l.z,{variant:"ghost",size:"icon",onClick:()=>{$(e),P(!0)},className:"h-8 w-8 text-zinc-400 hover:text-zinc-100",children:t.jsx(d.Z,{size:16})}),t.jsx(l.z,{variant:"ghost",size:"icon",onClick:()=>{$(e),_(!0)},className:"h-8 w-8 text-red-400 hover:text-red-300",children:t.jsx(m.Z,{size:16})})]})})]},e.id)):t.jsx(x.SC,{children:t.jsx(x.pj,{colSpan:3,className:"h-24 text-center",children:N?"Ничего не найдено по вашему запросу":"Коллекции не найдены"})})})]})})]}),t.jsx(h.Vq,{open:w,onOpenChange:C,children:(0,t.jsxs)(h.cZ,{className:"bg-zinc-900 border-zinc-800 text-zinc-100 max-w-2xl",children:[t.jsx(h.fK,{children:t.jsx(h.$N,{children:"Добавить новую коллекцию"})}),t.jsx(p.Z,{endpoint:"/api/collections",entityName:"Коллекция",fields:[{name:"name",label:"Название",type:"text",required:!0}],onSuccess:()=>{C(!1),q()},onCancel:()=>C(!1)})]})}),t.jsx(h.Vq,{open:S,onOpenChange:P,children:(0,t.jsxs)(h.cZ,{className:"bg-zinc-900 border-zinc-800 text-zinc-100 max-w-2xl",children:[t.jsx(h.fK,{children:t.jsx(h.$N,{children:"Редактировать коллекцию"})}),E&&t.jsx(p.Z,{endpoint:"/api/collections",entityName:"Коллекция",initialData:E,fields:[{name:"name",label:"Название",type:"text",required:!0}],onSuccess:()=>{P(!1),q()},onCancel:()=>P(!1)})]})}),E&&t.jsx(u.Z,{isOpen:k,onClose:()=>_(!1),onConfirm:()=>{_(!1),q()},endpoint:"/api/collections",id:E.id,entityName:"коллекцию",entityLabel:E.name})]})}},5426:(e,s,a)=>{"use strict";a.d(s,{Z:()=>c});var t=a(10326),n=a(17577),r=a(99440),l=a(34789),i=a(77506);function c({isOpen:e,onClose:s,onConfirm:a,endpoint:c,id:o,entityName:d,entityLabel:m}){let[x,h]=(0,n.useState)(!1),p=async()=>{h(!0);try{if(!(await fetch(`${c}/${o}`,{method:"DELETE"})).ok)throw Error(`Ошибка при удалении ${d}`);(0,l.Am)({title:"Успешно",description:`${m} был удален`}),a()}catch(e){console.error(`Error deleting ${d}:`,e),(0,l.Am)({title:"Ошибка",description:`Не удалось удалить ${d}`,variant:"destructive"}),s()}finally{h(!1)}};return t.jsx(r.aR,{open:e,onOpenChange:s,children:(0,t.jsxs)(r._T,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsxs)(r.fY,{children:[t.jsx(r.f$,{children:"Вы уверены?"}),(0,t.jsxs)(r.yT,{className:"text-zinc-400",children:["Вы собираетесь удалить ",d,' "',m,'". Это действие нельзя отменить.']})]}),(0,t.jsxs)(r.xo,{children:[t.jsx(r.le,{className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700 text-zinc-300",disabled:x,children:"Отмена"}),t.jsx(r.OL,{onClick:e=>{e.preventDefault(),p()},className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",disabled:x,children:x?(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Удаление..."]}):"Удалить"})]})]})})}},3892:(e,s,a)=>{"use strict";a.d(s,{Z:()=>h});var t=a(10326),n=a(17577),r=a(90772),l=a(54432),i=a(31048),c=a(34789),o=a(41291),d=a(77506),m=a(34474),x=a(43273);function h({endpoint:e,entityName:s,initialData:a,fields:h,onSuccess:p,onCancel:u}){let b=!!a?.id,[j,f]=(0,n.useState)(!1),[g,N]=(0,n.useState)(null),[v,z]=(0,n.useState)(()=>{let e={};return h.forEach(s=>{a&&void 0!==a[s.name]?e[s.name]=a[s.name]:void 0!==s.defaultValue?e[s.name]=s.defaultValue:(s.type,e[s.name]="")}),e}),y=(e,s)=>{z(a=>({...a,[e]:s})),N(null)},w=async t=>{t.preventDefault(),f(!0),N(null);try{let t={...v};h.forEach(e=>{"select"===e.type&&t[e.name]&&(t[e.name]=Number(t[e.name]))});let n=b?`${e}/${a.id}`:e,r=await fetch(n,{method:b?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),l=await r.json();if(!r.ok){if(400===r.status||422===r.status){let e=l.error||l.message||l.detail||"Неверные данные",s="";throw l.details&&(s="object"==typeof l.details?JSON.stringify(l.details,null,2):l.details),Error(`${e}${s?`
${s}`:""}`)}throw Error(l.error||"Произошла ошибка при сохранении")}(0,c.Am)({title:"Успешно",description:b?`${s} обновлен`:`${s} создан`}),p()}catch(e){console.error(`Error saving ${s}:`,e),N(e instanceof Error?e.message:"Произошла ошибка при сохранении")}finally{f(!1)}};return(0,t.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[g&&(0,t.jsxs)(x.bZ,{variant:"destructive",className:"bg-red-900/20 border-red-800 text-red-300",children:[t.jsx(o.Z,{className:"h-4 w-4"}),t.jsx(x.X,{className:"whitespace-pre-wrap",children:g})]}),h.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(i.Label,{htmlFor:e.name,children:e.label}),"text"===e.type&&t.jsx(l.I,{id:e.name,value:v[e.name]||"",onChange:s=>y(e.name,s.target.value),className:"bg-zinc-800 border-zinc-700",required:e.required}),"color"===e.type&&(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(l.I,{id:e.name,type:"color",value:v[e.name]||"#000000",onChange:s=>y(e.name,s.target.value),className:"w-16 p-1 h-10 bg-zinc-800 border-zinc-700",required:e.required}),t.jsx(l.I,{value:v[e.name]||"",onChange:s=>y(e.name,s.target.value),className:"flex-1 font-mono bg-zinc-800 border-zinc-700",placeholder:"#000000"})]}),"select"===e.type&&e.options&&(0,t.jsxs)(m.Ph,{value:String(v[e.name]||""),onValueChange:s=>y(e.name,s?Number(s):""),children:[t.jsx(m.i4,{className:"bg-zinc-800 border-zinc-700",children:t.jsx(m.ki,{placeholder:`Не выбрано`})}),t.jsx(m.Bw,{className:"bg-zinc-900 border-zinc-700",children:e.options.map(e=>t.jsx(m.Ql,{value:String(e.id),children:e.name},e.id))})]})]},e.name)),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx(r.z,{type:"button",variant:"outline",onClick:u,className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",children:"Отмена"}),(0,t.jsxs)(r.z,{type:"submit",disabled:j,className:"bg-zinc-700 hover:bg-zinc-600",children:[j&&t.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),b?"Сохранить":"Создать"]})]})]})}},15940:(e,s,a)=>{"use strict";a.d(s,{RM:()=>c,SC:()=>o,iA:()=>l,pj:()=>m,ss:()=>d,xD:()=>i});var t=a(10326),n=a(17577),r=a(77863);let l=n.forwardRef(({className:e,...s},a)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",e),...s})}));l.displayName="Table";let i=n.forwardRef(({className:e,...s},a)=>t.jsx("thead",{ref:a,className:(0,r.cn)("[&_tr]:border-b",e),...s}));i.displayName="TableHeader";let c=n.forwardRef(({className:e,...s},a)=>t.jsx("tbody",{ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...s}));c.displayName="TableBody",n.forwardRef(({className:e,...s},a)=>t.jsx("tfoot",{ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let o=n.forwardRef(({className:e,...s},a)=>t.jsx("tr",{ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));o.displayName="TableRow";let d=n.forwardRef(({className:e,...s},a)=>t.jsx("th",{ref:a,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableHead";let m=n.forwardRef(({className:e,...s},a)=>t.jsx("td",{ref:a,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));m.displayName="TableCell",n.forwardRef(({className:e,...s},a)=>t.jsx("caption",{ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},45315:(e,s,a)=>{"use strict";function t(){return null}a.r(s),a.d(s,{default:()=>t})},29145:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/collections/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[276,339,762,521,935,321,848,391,803],()=>a(14293));module.exports=t})();