(()=>{var e={};e.id=488,e.ids=[488],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},46828:(e,r,a)=>{"use strict";a.r(r),a.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),a(90756),a(5964),a(35866);var s=a(23191),t=a(88716),n=a(37922),i=a.n(n),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(r,o);let c=["",{children:["rarities",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,90756)),"/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/rarities/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,99587)),"/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/rarities/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,5964)),"/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/rarities/page.tsx"],m="/rarities/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/rarities/page",pathname:"/rarities",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},46337:(e,r,a)=>{Promise.resolve().then(a.bind(a,42949))},42949:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>v});var s=a(10326),t=a(17577),n=a(78391),i=a(90772),l=a(54432),o=a(88307),c=a(83855),d=a(69508),m=a(98091),x=a(15940),u=a(567),p=a(62288),h=a(3892),b=a(5426),f=a(34789);let j=[{id:1,name:"Common",color:"#d3d3d3"},{id:2,name:"Uncommon",color:"#add8e6"},{id:3,name:"Rare",color:"#87ceeb"},{id:4,name:"Epic",color:"#9370db"},{id:5,name:"Legendary",color:"#ff69b4"}],g=e=>{switch(e.toLowerCase()){case"common":return"#d3d3d3";case"uncommon":return"#add8e6";case"rare":return"#87ceeb";case"epic":return"#9370db";case"legendary":return"#ff69b4";case"arcane":return"#ff4500";case"nameless":return"#b8860b";default:return"#808080"}};function v(){let{toast:e}=(0,f.pm)(),[r,a]=(0,t.useState)([]),[v,N]=(0,t.useState)(!0),[y,z]=(0,t.useState)(""),[w,C]=(0,t.useState)(!1),[S,P]=(0,t.useState)(!1),[k,_]=(0,t.useState)(!1),[E,$]=(0,t.useState)(!1),[q,R]=(0,t.useState)(null),T=async()=>{try{N(!0),C(!1);let e=await fetch("/api/rarities",{cache:"no-store"});if(!e.ok)throw Error(`API Error: ${e.status}`);let r=(await e.json()).map(e=>({...e,color:e.color||g(e.name)}));a(r)}catch(r){console.error("Error fetching rarities:",r),a(j),C(!0),e({title:"Внимание",description:"Используются демо-данные для предпросмотра.",variant:"destructive"})}finally{N(!1)}},Z=r.filter(e=>e.name.toLowerCase().includes(y.toLowerCase()));return(0,s.jsxs)(n.default,{children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Rarities"}),s.jsx("p",{className:"text-zinc-400",children:"Manage item rarity levels"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(o.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-zinc-500"}),s.jsx(l.I,{type:"search",placeholder:"Search rarities...",className:"pl-8 bg-zinc-900 border-zinc-800 focus-visible:ring-zinc-700",value:y,onChange:e=>z(e.target.value)})]}),(0,s.jsxs)(i.z,{className:"bg-zinc-800 hover:bg-zinc-700",onClick:()=>P(!0),children:[s.jsx(c.Z,{size:18,className:"mr-2"}),"Add Rarity"]})]})]}),v&&s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-zinc-400"})}),w&&!v&&(0,s.jsxs)("div",{className:"bg-amber-900/20 border border-amber-800 text-amber-300 p-4 rounded-lg mb-6",children:[s.jsx("p",{children:"Используются демо-данные для предпросмотра."}),s.jsx("p",{className:"mt-2 text-sm",children:"В рабочей версии приложения данные будут загружаться с вашего API."})]}),!v&&(0,s.jsxs)(s.Fragment,{children:[y&&(0,s.jsxs)("p",{className:"mb-4 text-zinc-400",children:["Найдено результатов: ",Z.length]}),s.jsx("div",{className:"rounded-md border border-zinc-800 overflow-hidden",children:(0,s.jsxs)(x.iA,{children:[s.jsx(x.xD,{className:"bg-zinc-900",children:(0,s.jsxs)(x.SC,{className:"hover:bg-zinc-900/80 border-zinc-800",children:[s.jsx(x.ss,{className:"text-zinc-400",children:"ID"}),s.jsx(x.ss,{className:"text-zinc-400",children:"Name"}),s.jsx(x.ss,{className:"text-zinc-400",children:"Color"}),s.jsx(x.ss,{className:"text-zinc-400 text-right",children:"Actions"})]})}),s.jsx(x.RM,{children:Z.length>0?Z.map(e=>(0,s.jsxs)(x.SC,{className:"hover:bg-zinc-900/50 border-zinc-800",children:[s.jsx(x.pj,{children:e.id}),s.jsx(x.pj,{className:"font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),e.name]})}),s.jsx(x.pj,{children:s.jsx(u.C,{variant:"outline",className:"font-mono bg-zinc-900 border-zinc-700",children:e.color})}),s.jsx(x.pj,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[s.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>{R(e),_(!0)},className:"h-8 w-8 text-zinc-400 hover:text-zinc-100",children:s.jsx(d.Z,{size:16})}),s.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>{R(e),$(!0)},className:"h-8 w-8 text-red-400 hover:text-red-300",children:s.jsx(m.Z,{size:16})})]})})]},e.id)):s.jsx(x.SC,{children:s.jsx(x.pj,{colSpan:4,className:"h-24 text-center",children:y?"Ничего не найдено по вашему запросу":"Редкости не найдены"})})})]})})]}),s.jsx(p.Vq,{open:S,onOpenChange:P,children:(0,s.jsxs)(p.cZ,{className:"bg-zinc-900 border-zinc-800 text-zinc-100 max-w-2xl",children:[s.jsx(p.fK,{children:s.jsx(p.$N,{children:"Добавить новую редкость"})}),s.jsx(h.Z,{endpoint:"/api/rarities",entityName:"Редкость",fields:[{name:"name",label:"Название",type:"text",required:!0},{name:"color",label:"Цвет",type:"color",required:!0,defaultValue:"#808080"}],onSuccess:()=>{P(!1),T()},onCancel:()=>P(!1)})]})}),s.jsx(p.Vq,{open:k,onOpenChange:_,children:(0,s.jsxs)(p.cZ,{className:"bg-zinc-900 border-zinc-800 text-zinc-100 max-w-2xl",children:[s.jsx(p.fK,{children:s.jsx(p.$N,{children:"Редактировать редкость"})}),q&&s.jsx(h.Z,{endpoint:"/api/rarities",entityName:"Редкость",initialData:q,fields:[{name:"name",label:"Название",type:"text",required:!0},{name:"color",label:"Цвет",type:"color",required:!0}],onSuccess:()=>{_(!1),T()},onCancel:()=>_(!1)})]})}),q&&s.jsx(b.Z,{isOpen:E,onClose:()=>$(!1),onConfirm:()=>{$(!1),T()},endpoint:"/api/rarities",id:q.id,entityName:"редкость",entityLabel:q.name})]})}},5426:(e,r,a)=>{"use strict";a.d(r,{Z:()=>o});var s=a(10326),t=a(17577),n=a(99440),i=a(34789),l=a(77506);function o({isOpen:e,onClose:r,onConfirm:a,endpoint:o,id:c,entityName:d,entityLabel:m}){let[x,u]=(0,t.useState)(!1),p=async()=>{u(!0);try{if(!(await fetch(`${o}/${c}`,{method:"DELETE"})).ok)throw Error(`Ошибка при удалении ${d}`);(0,i.Am)({title:"Успешно",description:`${m} был удален`}),a()}catch(e){console.error(`Error deleting ${d}:`,e),(0,i.Am)({title:"Ошибка",description:`Не удалось удалить ${d}`,variant:"destructive"}),r()}finally{u(!1)}};return s.jsx(n.aR,{open:e,onOpenChange:r,children:(0,s.jsxs)(n._T,{className:"bg-zinc-900 border-zinc-800",children:[(0,s.jsxs)(n.fY,{children:[s.jsx(n.f$,{children:"Вы уверены?"}),(0,s.jsxs)(n.yT,{className:"text-zinc-400",children:["Вы собираетесь удалить ",d,' "',m,'". Это действие нельзя отменить.']})]}),(0,s.jsxs)(n.xo,{children:[s.jsx(n.le,{className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700 text-zinc-300",disabled:x,children:"Отмена"}),s.jsx(n.OL,{onClick:e=>{e.preventDefault(),p()},className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",disabled:x,children:x?(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Удаление..."]}):"Удалить"})]})]})})}},3892:(e,r,a)=>{"use strict";a.d(r,{Z:()=>u});var s=a(10326),t=a(17577),n=a(90772),i=a(54432),l=a(31048),o=a(34789),c=a(41291),d=a(77506),m=a(34474),x=a(43273);function u({endpoint:e,entityName:r,initialData:a,fields:u,onSuccess:p,onCancel:h}){let b=!!a?.id,[f,j]=(0,t.useState)(!1),[g,v]=(0,t.useState)(null),[N,y]=(0,t.useState)(()=>{let e={};return u.forEach(r=>{a&&void 0!==a[r.name]?e[r.name]=a[r.name]:void 0!==r.defaultValue?e[r.name]=r.defaultValue:(r.type,e[r.name]="")}),e}),z=(e,r)=>{y(a=>({...a,[e]:r})),v(null)},w=async s=>{s.preventDefault(),j(!0),v(null);try{let s={...N};u.forEach(e=>{"select"===e.type&&s[e.name]&&(s[e.name]=Number(s[e.name]))});let t=b?`${e}/${a.id}`:e,n=await fetch(t,{method:b?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),i=await n.json();if(!n.ok){if(400===n.status||422===n.status){let e=i.error||i.message||i.detail||"Неверные данные",r="";throw i.details&&(r="object"==typeof i.details?JSON.stringify(i.details,null,2):i.details),Error(`${e}${r?`
${r}`:""}`)}throw Error(i.error||"Произошла ошибка при сохранении")}(0,o.Am)({title:"Успешно",description:b?`${r} обновлен`:`${r} создан`}),p()}catch(e){console.error(`Error saving ${r}:`,e),v(e instanceof Error?e.message:"Произошла ошибка при сохранении")}finally{j(!1)}};return(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[g&&(0,s.jsxs)(x.bZ,{variant:"destructive",className:"bg-red-900/20 border-red-800 text-red-300",children:[s.jsx(c.Z,{className:"h-4 w-4"}),s.jsx(x.X,{className:"whitespace-pre-wrap",children:g})]}),u.map(e=>(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(l.Label,{htmlFor:e.name,children:e.label}),"text"===e.type&&s.jsx(i.I,{id:e.name,value:N[e.name]||"",onChange:r=>z(e.name,r.target.value),className:"bg-zinc-800 border-zinc-700",required:e.required}),"color"===e.type&&(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(i.I,{id:e.name,type:"color",value:N[e.name]||"#000000",onChange:r=>z(e.name,r.target.value),className:"w-16 p-1 h-10 bg-zinc-800 border-zinc-700",required:e.required}),s.jsx(i.I,{value:N[e.name]||"",onChange:r=>z(e.name,r.target.value),className:"flex-1 font-mono bg-zinc-800 border-zinc-700",placeholder:"#000000"})]}),"select"===e.type&&e.options&&(0,s.jsxs)(m.Ph,{value:String(N[e.name]||""),onValueChange:r=>z(e.name,r?Number(r):""),children:[s.jsx(m.i4,{className:"bg-zinc-800 border-zinc-700",children:s.jsx(m.ki,{placeholder:`Не выбрано`})}),s.jsx(m.Bw,{className:"bg-zinc-900 border-zinc-700",children:e.options.map(e=>s.jsx(m.Ql,{value:String(e.id),children:e.name},e.id))})]})]},e.name)),(0,s.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(n.z,{type:"button",variant:"outline",onClick:h,className:"bg-zinc-800 border-zinc-700 hover:bg-zinc-700",children:"Отмена"}),(0,s.jsxs)(n.z,{type:"submit",disabled:f,className:"bg-zinc-700 hover:bg-zinc-600",children:[f&&s.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),b?"Сохранить":"Создать"]})]})]})}},567:(e,r,a)=>{"use strict";a.d(r,{C:()=>l});var s=a(10326);a(17577);var t=a(79360),n=a(77863);let i=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:r,...a}){return s.jsx("div",{className:(0,n.cn)(i({variant:r}),e),...a})}},15940:(e,r,a)=>{"use strict";a.d(r,{RM:()=>o,SC:()=>c,iA:()=>i,pj:()=>m,ss:()=>d,xD:()=>l});var s=a(10326),t=a(17577),n=a(77863);let i=t.forwardRef(({className:e,...r},a)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:a,className:(0,n.cn)("w-full caption-bottom text-sm",e),...r})}));i.displayName="Table";let l=t.forwardRef(({className:e,...r},a)=>s.jsx("thead",{ref:a,className:(0,n.cn)("[&_tr]:border-b",e),...r}));l.displayName="TableHeader";let o=t.forwardRef(({className:e,...r},a)=>s.jsx("tbody",{ref:a,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...r}));o.displayName="TableBody",t.forwardRef(({className:e,...r},a)=>s.jsx("tfoot",{ref:a,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let c=t.forwardRef(({className:e,...r},a)=>s.jsx("tr",{ref:a,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));c.displayName="TableRow";let d=t.forwardRef(({className:e,...r},a)=>s.jsx("th",{ref:a,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...r}));d.displayName="TableHead";let m=t.forwardRef(({className:e,...r},a)=>s.jsx("td",{ref:a,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...r}));m.displayName="TableCell",t.forwardRef(({className:e,...r},a)=>s.jsx("caption",{ref:a,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...r})).displayName="TableCaption"},99587:(e,r,a)=>{"use strict";function s(){return null}a.r(r),a.d(r,{default:()=>s})},90756:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/macbook_uz/Projects/standoffbook/admin-panel-2/nextjs-admin-panel/app/rarities/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),s=r.X(0,[276,339,762,521,935,321,848,391,803],()=>a(46828));module.exports=s})();